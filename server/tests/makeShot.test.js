import { makeShot } from "../logic/makeShot";

let field1, users1;
let field2, users2;
let field3, users3;
let field4, users4;
let field5, users5;
let field6, users6;

beforeEach(() => {
  field1 = [
    [" ", " ", " ", " ", " ", " ", " "],
    [" ", "*", " ", " ", " ", " ", " "],
    ["*", "*", "*", " ", " ", " ", " "],
    ["*", " ", "*", " ", " ", " ", " "],
    [" ", " ", " ", " ", " ", " ", " "],
  ];

  users1 = [{ id: 0, name: "tester", row: 2, col: 1, direction: "RIGHT" }];

  field2 = [
    ["*", " ", "*", " ", " ", " ", " "],
    ["*", "*", "*", " ", " ", " ", " "],
    [" ", "*", " ", " ", " ", " ", " "],
    [" ", " ", " ", " ", " ", " ", " "],
    [" ", " ", " ", " ", " ", " ", " "],
  ];

  users2 = [{ id: 0, name: "tester", row: 1, col: 1, direction: "BOTTOM" }];

  field3 = [
    ["*", "*", " ", " ", " ", " ", " "],
    [" ", "*", "*", " ", " ", " ", " "],
    ["*", "*", " ", " ", " ", " ", " "],
    [" ", " ", " ", " ", " ", " ", " "],
    [" ", " ", " ", " ", " ", " ", " "],
  ];

  users3 = [{ id: 0, name: "tester", row: 1, col: 1, direction: "RIGHT" }];

  field4 = [
    [" ", " ", "*", "*", " ", " ", " "],
    [" ", "*", "*", " ", " ", " ", " "],
    [" ", " ", "*", "*", " ", " ", " "],
    [" ", " ", " ", " ", " ", " ", " "],
    [" ", " ", " ", " ", " ", " ", " "],
  ];

  users4 = [{ id: 0, name: "tester", row: 1, col: 2, direction: "LEFT" }];

  field5 = [
    [" ", "*", "*", " ", " ", " ", " "],
    ["*", "*", " ", " ", " ", " ", " "],
    [" ", "*", "*", " ", " ", " ", " "],
    [" ", " ", " ", " ", " ", " ", " "],
    [" ", " ", " ", " ", " ", " ", " "],
  ];

  users5 = [{ id: 0, name: "tester", row: 1, col: 1, direction: "LEFT" }];

  field6 = [
    [" ", "*", " ", " ", " ", " ", " "],
    ["*", "*", "*", " ", " ", " ", " "],
    ["*", " ", "*", " ", " ", " ", " "],
    [" ", " ", " ", " ", " ", " ", " "],
    [" ", " ", " ", " ", " ", " ", " "],
  ];

  users6 = [{ id: 0, name: "tester", row: 1, col: 1, direction: "UP" }];
});

it("makeShot: выстрел вверх", () => {
  expect(makeShot(field1, users1, 0, [])).toEqual([
    [
      [" ", "⚫", " ", " ", " ", " ", " "],
      [" ", "*", " ", " ", " ", " ", " "],
      ["*", "*", "*", " ", " ", " ", " "],
      ["*", " ", "*", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " "],
    ],
    [{ userId: 0, row: 0, col: 1, direction: "UP" }],
  ]);
});

it("makeShot: выстрел вниз", () => {
  expect(makeShot(field2, users2, 0, [])).toEqual([
    [
      ["*", " ", "*", " ", " ", " ", " "],
      ["*", "*", "*", " ", " ", " ", " "],
      [" ", "*", " ", " ", " ", " ", " "],
      [" ", "⚫", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " "],
    ],
    [{ userId: 0, row: 3, col: 1, direction: "BOTTOM" }],
  ]);
});

it("makeShot: выстрел вправо", () => {
  expect(makeShot(field3, users3, 0, [])).toEqual([
    [
      ["*", "*", " ", " ", " ", " ", " "],
      [" ", "*", "*", "⚫", " ", " ", " "],
      ["*", "*", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " "],
    ],
    [{ userId: 0, row: 1, col: 3, direction: "RIGHT" }],
  ]);
});

it("makeShot: выстрел влево", () => {
  expect(makeShot(field4, users4, 0, [])).toEqual([
    [
      [" ", " ", "*", "*", " ", " ", " "],
      ["⚫", "*", "*", " ", " ", " ", " "],
      [" ", " ", "*", "*", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " "],
    ],
    [{ userId: 0, row: 1, col: 0, direction: "LEFT" }],
  ]);
});

it("makeShot: выстрел в стену влево", () => {
  expect(makeShot(field5, users5, 0, [])).toEqual([
    [
      [" ", "*", "*", " ", " ", " ", " "],
      ["*", "*", " ", " ", " ", " ", " "],
      [" ", "*", "*", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " "],
    ],
    [],
  ]);
});

it("makeShot: выстрел в стену вверх", () => {
  expect(makeShot(field6, users6, 0, [])).toEqual([
    [
      [" ", "*", " ", " ", " ", " ", " "],
      ["*", "*", "*", " ", " ", " ", " "],
      ["*", " ", "*", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " "],
      [" ", " ", " ", " ", " ", " ", " "],
    ],
    [],
  ]);
});
